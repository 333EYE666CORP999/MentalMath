name: Build and Deploy DocC

on:
  push:
    branches:
      - '**'  # Trigger on any branch

jobs:
  build-and-deploy:
    runs-on: macos-14  # Specify macOS version

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Xcode
        uses: apple-actions/setup-xcode@v3
        with:
          xcode-version: '15.0'  # Specify the Xcode version compatible with your code

      - name: Build DocC Documentation
        uses: swift-actions/build-docc-static-site@v1
        with:
          project: Numerica
          scheme: Numerica
          output: './docs'
          hosting-base-path: Numerica
          disable-indexing: 'true'
          transform-for-static-hosting: 'true'

      - name: Deploy DocC Documentation to GitHub Pages
        uses: swift-actions/deploy-docc-to-github-pages@v1
        with:
          docs-path: './docs'
          branch: 'gh-pages'  # Specify the branch for GitHub Pages
          target: Numerica
          package-name: Numerica
