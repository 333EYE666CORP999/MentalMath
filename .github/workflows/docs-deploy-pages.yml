name: Deploy DocC

on:
  push:
    branches:
      - '**'  # Trigger on any branch

jobs:
  docc:
    runs-on: macos-14  # Specify macOS version

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Xcode
        uses: apple-actions/setup-xcode@v3
        with:
          xcode-version: '15.4'  # Specify the Xcode version compatible with your code

      - name: Build and deploy DocC
        uses: fwcd/swift-docc-action@v1.0.2
        with:
          project: Numerica
          scheme: Numerica
          output: ./docs
          hosting-base-path: MentalMath
          disable-indexing: 'true'
          transform-for-static-hosting: 'true'

      - name: Upload docs to GitHub Pages
        uses: actions/upload-pages-artifact@v1
        with:
          path: './docs'

      - name: Deploy to GitHub Pages
        uses: actions/deploy-pages@v1
